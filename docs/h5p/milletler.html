<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Jeu — Devine la nationalité (turc)</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icons/6.6.6/css/flag-icons.min.css" />
<style>
  :root {
    --bg: #0a192f;
    --card: #112240;
    --text: #e6f1ff;
    --muted: #8892b0;
    --accent: #64ffda;
    --secondary: #233554;
    --border: #1d3a6b;
    --green: #2ecc71;
    --red: #e74c3c;
  }
  body {
    font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial;
    margin: 0;
    background: var(--bg);
    color: var(--text);
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    padding: 0;
  }
  .card { 
    background: var(--card); 
    width:100%; 
    max-width:760px; 
    border-radius:0; 
    box-shadow: none;
    padding:16px; 
    margin: 0;
  }
  h1 { 
    margin:0 0 8px; 
    font-size:1.4rem; 
    text-align: center;
    color: var(--accent);
  }
  p.lead { 
    margin:0 0 16px; 
    color:var(--muted); 
    font-size:0.95rem; 
    line-height:1.4; 
    text-align: center;
  }
  .game { 
    display:grid; 
    grid-template-columns:1fr; 
    gap:16px; 
  }
  .panel { 
    padding:16px; 
    border-radius:8px; 
    background:rgba(23,42,69,0.5); 
    border:1px solid var(--border); 
    transition:background 0.3s ease; 
  }
  .country-container { 
    display:flex; 
    align-items:center; 
    justify-content: center;
    gap:12px; 
    margin-bottom:12px; 
  }
  .flag-container { 
    width:52px; 
    height:52px; 
    border-radius:50%; 
    display:flex; 
    align-items:center; 
    justify-content:center; 
    background:var(--secondary); 
    box-shadow:0 2px 8px rgba(0,0,0,0.2); 
    flex-shrink: 0;
  }
  .fi { 
    border-radius:50%; 
    font-size:26px; 
    width:38px; 
    height:38px; 
    display:flex; 
    align-items:center; 
    justify-content:center; 
  }
  .country { 
    font-weight:700; 
    font-size:1.6rem; 
    color:var(--accent); 
  }
  .hint { 
    color:var(--muted); 
    font-size:0.95rem; 
    margin:12px 0;
    text-align: center;
    font-style: italic;
  }
  .controls { 
    display:grid;
    grid-template-columns: 1fr auto auto;
    gap:8px; 
    margin-top:16px; 
  }
  input[type=text]{ 
    padding:12px; 
    border-radius:8px; 
    border:1px solid var(--border); 
    font-size:1rem; 
    background:var(--secondary); 
    color:var(--text); 
  }
  input[type=text]:focus{ 
    outline:none; 
    border-color:var(--accent); 
    box-shadow:0 0 0 2px rgba(100,255,218,0.2); 
  }
  button{ 
    background:var(--accent); 
    color:var(--bg); 
    border:none; 
    padding:12px 16px; 
    border-radius:8px; 
    font-weight:600; 
    cursor:pointer; 
    transition:all 0.2s ease; 
    white-space: nowrap;
  }
  button:hover{ 
    transform:translateY(-2px); 
    box-shadow:0 4px 8px rgba(100,255,218,0.2); 
  }
  button.secondary{ 
    background:var(--secondary); 
    color:var(--accent); 
  }
  .result{ 
    margin:16px 0 8px; 
    font-weight:700; 
    font-size:1.2rem; 
    text-align:center; 
    min-height:28px; 
  }
  .correct{ 
    color:var(--green); 
  }
  .wrong{ 
    color:var(--red); 
  }
  .score{ 
    font-size:1rem; 
    margin:12px 0;
    padding:8px 16px; 
    background:var(--secondary); 
    border-radius:8px; 
    text-align: center;
  }
  .list{ 
    max-height:220px; 
    overflow:auto; 
    padding:12px; 
    border-radius:8px; 
    background:var(--secondary); 
    border:1px solid var(--border); 
    font-size: 0.95rem;
    margin-top: 16px;
  }
  .list div {
    margin-bottom: 8px;
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 4px 0;
  }
  .footer{ 
    margin-top:16px; 
    font-size:0.85rem; 
    color:var(--muted); 
    text-align: center;
    padding-top: 12px;
    border-top: 1px solid var(--border);
  }
  
  /* Animations */
  .panel.correct-anim{ 
    animation:flashGreen 0.8s ease; 
  }
  .panel.incorrect-anim{ 
    animation:flashRed 0.8s ease; 
  }
  @keyframes flashGreen{
    0%{background:rgba(23,42,69,0.5);}
    30%{background:rgba(46,204,113,0.6);}
    100%{background:rgba(23,42,69,0.5);}
  }
  @keyframes flashRed{
    0%{background:rgba(23,42,69,0.5);}
    30%{background:rgba(231,76,60,0.6);}
    100%{background:rgba(23,42,69,0.5);}
  }
  .flag-container.correct-anim{ 
    animation:bounce 0.8s ease; 
  }
  .flag-container.incorrect-anim{ 
    animation:shake 0.6s ease; 
  }
  @keyframes bounce{
    0%,100%{transform:scale(1);}
    30%{transform:scale(1.3);}
    60%{transform:scale(0.9);}
  }
  @keyframes shake{
    0%,100%{transform:translateX(0);}
    20%,60%{transform:translateX(-8px);}
    40%,80%{transform:translateX(8px);}
  }
  
  /* Mobile optimizations */
  @media (max-width: 600px) {
    .card {
      padding: 14px;
    }
    .panel {
      padding: 14px;
    }
    .country {
      font-size: 1.4rem;
    }
    .controls {
      grid-template-columns: 1fr;
    }
    .flag-container {
      width: 48px;
      height: 48px;
    }
    .fi {
      font-size: 24px;
      width: 34px;
      height: 34px;
    }
  }
  
  /* Rules panel */
  .rules-panel {
    margin-top: 20px;
    padding: 16px;
    border-radius: 8px;
    background: var(--secondary);
    border: 1px solid var(--border);
  }
  .rules-panel h3 {
    margin-top: 0;
    color: var(--accent);
    font-size: 1.1rem;
  }
  .rules-list {
    padding-left: 20px;
    margin-bottom: 0;
  }
  .rules-list li {
    margin-bottom: 8px;
    font-size: 0.9rem;
    color: var(--muted);
  }
</style>
</head>
<body>
<main class="card" role="main">
  <h1>Jeu — Devine la nationalité (turc)</h1>
  <p class="lead">
    Devine la nationalité en turc à partir du pays.  
    Certaines réponses sont des mots spécifiques, d'autres utilisent les suffixes -lı/-li/-lu/-lü.
  </p>

  <div class="game" aria-live="polite">
    <section class="panel" id="mainPanel">
      <div class="country-container">
        <div class="flag-container" id="flagBox"><span id="countryFlag" class="fi"></span></div>
        <div class="country" id="countryName">—</div>
      </div>
      <div class="hint" id="hintText">Indice : regarde la dernière voyelle...</div>

      <div class="controls">
        <input type="text" id="answerInput" placeholder="Nationalité en turc" autocomplete="off" />
        <button id="checkBtn">Vérifier</button>
        <button class="secondary" id="skipBtn">Passer</button>
      </div>

      <div class="result" id="result"></div>
      <div class="score" id="score">Score: 0 / 0</div>
    </section>

    <div class="rules-panel">
      <h3>Règles du jeu</h3>
      <ul class="rules-list">
        <li>Devine la nationalité turque correspondant au pays affiché</li>
        <li>Certaines nationalités sont des mots spécifiques (ex: Fransız)</li>
        <li>D'autres utilisent les suffixes -lı, -li, -lu, -lü selon la dernière voyelle du pays</li>
        <li>Appuie sur Entrée ou clique sur "Vérifier" pour valider ta réponse</li>
      </ul>
    </div>

    <div class="list" id="countryList"></div>
    
    <div style="text-align: center; margin-top: 16px;">
      <button id="newGame">Nouvelle série</button>
    </div>
  </div>
  
  <div class="footer">Jeu éducatif pour pratiquer les nationalités en turc</div>
</main>

<script>
(function(){
  const pairs = [
    {country:'Fransa',nationality:'Fransız',flag:'fr'},
    {country:'Almanya',nationality:'Alman',flag:'de'},
    {country:'İspanya',nationality:'İspanyol',flag:'es'},
    {country:'İngiltere',nationality:'İngiliz',flag:'gb'},
    {country:'Amerika',nationality:'Amerikalı',flag:'us'},
    {country:'Çin',nationality:'Çinli',flag:'cn'},
    {country:'Japonya',nationality:'Japon',flag:'jp'},
    {country:'İtalya',nationality:'İtalyan',flag:'it'},
    {country:'Rusya',nationality:'Rus',flag:'ru'},
    {country:'Türkiye',nationality:'Türk',flag:'tr'},
    {country:'Yunanistan',nationality:'Yunan',flag:'gr'},
    {country:'Mısır',nationality:'Mısırlı',flag:'eg'},
    {country:'Kanada',nationality:'Kanadalı',flag:'ca'},
    {country:'Brezilya',nationality:'Brezilyalı',flag:'br'},
    {country:'Arjantin',nationality:'Arjantinli',flag:'ar'},
    {country:'Meksika',nationality:'Meksikalı',flag:'mx'},
    {country:'Kore',nationality:'Koreli',flag:'kr'},
    {country:'Hindistan',nationality:'Hintli',flag:'in'},
    {country:'İsveç',nationality:'İsveçli',flag:'se'},
    {country:'İsviçre',nationality:'İsviçreli',flag:'ch'},
    {country:'Avustralya',nationality:'Avustralyalı',flag:'au'}
  ];

  const countryNameEl=document.getElementById('countryName');
  const countryFlagEl=document.getElementById('countryFlag');
  const answerInput=document.getElementById('answerInput');
  const checkBtn=document.getElementById('checkBtn');
  const skipBtn=document.getElementById('skipBtn');
  const resultEl=document.getElementById('result');
  const scoreEl=document.getElementById('score');
  const countryListEl=document.getElementById('countryList');
  const newGameBtn=document.getElementById('newGame');
  const flagBox=document.getElementById('flagBox');
  const mainPanel=document.getElementById('mainPanel');

  let order=[]; let index=0; let correct=0; let total=0; let timeoutId=null;
  const norm=s=>s.toLowerCase().trim();

  function buildList(){
    countryListEl.innerHTML='<div style="font-weight: bold; margin-bottom: 10px;">Liste des pays</div>';
    pairs.forEach(p=>{
      const div=document.createElement('div');
      div.innerHTML=`<span class="fi fi-${p.flag}"></span> ${p.country} → ${p.nationality}`;
      countryListEl.appendChild(div);
    });
  }
  
  function shuffle(){ 
    order=pairs.map((_,i)=>i).sort(()=>Math.random()-0.5); 
    index=0; 
    correct=0; 
    total=0; 
    updateScore(); 
  }
  
  function updateScore(){ 
    scoreEl.textContent=`Score: ${correct} / ${total}`; 
  }
  
  function showCountry(){
    const current=pairs[order[index]];
    countryNameEl.textContent=current.country;
    countryFlagEl.className=`fi fi-${current.flag}`;
    answerInput.value=''; 
    resultEl.textContent='';
    answerInput.focus();
  }
  
  function check(){
    const current=pairs[order[index]];
    const answer=answerInput.value||'';
    if(!answer.trim()) return;
    total++; 
    if(timeoutId) clearTimeout(timeoutId);
    
    if(norm(answer)===norm(current.nationality)){
      correct++; 
      resultEl.innerHTML=`<span class="correct">✅ Correct — ${current.nationality}</span>`;
      mainPanel.classList.add('correct-anim'); 
      flagBox.classList.add('correct-anim');
      setTimeout(()=>{ 
        mainPanel.classList.remove('correct-anim'); 
        flagBox.classList.remove('correct-anim'); 
      },800);
    } else {
      resultEl.innerHTML=`<span class="wrong">❌ Faux — ${current.nationality}</span>`;
      mainPanel.classList.add('incorrect-anim'); 
      flagBox.classList.add('incorrect-anim');
      setTimeout(()=>{ 
        mainPanel.classList.remove('incorrect-anim'); 
        flagBox.classList.remove('incorrect-anim'); 
      },800);
    }
    updateScore(); 
    timeoutId=setTimeout(()=>nextCountry(),2000);
  }
  
  function skip(){
    const current=pairs[order[index]];
    total++; 
    resultEl.innerHTML=`<span class="wrong">⏭ Passé — ${current.nationality}</span>`;
    updateScore(); 
    timeoutId=setTimeout(()=>nextCountry(),1500);
  }
  
  function nextCountry(){ 
    index++; 
    if(index>=order.length){ 
      resultEl.innerHTML+='<div style="margin-top:8px">Fin de la série</div>'; 
    } else { 
      showCountry(); 
    } 
  }
  
  checkBtn.addEventListener('click',check);
  answerInput.addEventListener('keydown',e=>{ if(e.key==='Enter') check(); });
  skipBtn.addEventListener('click',skip);
  newGameBtn.addEventListener('click',()=>{ 
    if(timeoutId) clearTimeout(timeoutId); 
    shuffle(); 
    showCountry(); 
  });
  
  buildList(); 
  shuffle(); 
  showCountry();
})();
</script>
</body>
</html>
